<div class="container" style="margin-top: 50px; margin-bottom: 20px">

    <h5>{{ 'overview_label_account_profile' | translate }} {{ userInfos.fullName.split(' ')[0] }} </h5>
    <div class="row">
       <app-account-menu></app-account-menu>

        <div class="col-md-4">
            <div class="gap gap-small"></div>
            <h5>{{ 'setting_label_personal_info' | translate }}</h5>
            <div class="gap gap-small"></div>

            <div class="book-left-info">


                <form accept-charset="UTF-8" class="form">
                <div class="form-group form-group-icon-left">
                    <i class="fa fa-user input-icon"></i>
                    <label for="First Name">{{ 'setting_label_full_name' | translate }}</label>
                    <input required="required" class="form-control" [disabled]="true" placeholder="" name="fullName" type="text" value="{{ userInfos.fullName }}">
                </div>

                <div class="form-group form-group-icon-left">
                    <i class="fa fa-envelope input-icon"></i>
                    <label for="E-mail Address">{{ 'register_label_email' | translate }}</label>
                    <input required="required" class="form-control" placeholder="" [disabled]="true" name="email" type="text" value="{{ userInfos.email }}">
                </div>

                <div class="form-group form-group-icon-left">
                    <i class="fa fa-bell input-icon"></i>
                    <label for="">{{ 'register_label_role' | translate }}</label>
                    <input required="required" class="form-control" placeholder="" [disabled]="true" name="role" type="text" value="{{ userInfos.role }}">
                </div>

                <div class="form-group">
                    <input class="btn btn-primary" type="submit" value="Update Account">
                </div>
                </form>
            </div>
        </div>

        <div class="col-md-2"></div>

        <div class="col-md-3">
            <div class="gap gap-small"></div>
            <div class="gap gap-small"></div>
            <h5>{{ 'setting_label_change_password' | translate }}</h5>
            <div class="gap gap-small"></div>

            <form accept-charset="UTF-8" [formGroup]="changePassword" (ngSubmit)="onSubmit()">
                <div class="form-group form-group-icon-left">
                    <i class="fa fa-envelope input-icon"></i>
                    <label>{{ 'register_label_email' | translate }}</label>
                    <input class="form-control" [disabled]="true" type="text" value="{{ userInfos.email }}">
                </div>

                <div class="form-group form-group-icon-left"><i class="fa fa-lock input-icon"></i>
                    <label>{{ 'setting_label_current_password' | translate }}</label>
                    <input class="form-control" type="password" name="oldPassword" formControlName="oldPassword"
                    [class.is-invalid]="changePassword.controls['oldPassword'].invalid && changePassword.controls['oldPassword'].touched" />
                </div>
                <div class="errorStyle" *ngIf="changePassword.controls['oldPassword'].invalid && changePassword.controls['oldPassword'].touched">
                  <b *ngIf="changePassword.controls['oldPassword']?.errors.required">{{ 'setting_current_password_required' | translate }}<br></b>
                  <b *ngIf="!changePassword.controls['oldPassword']?.errors.minLength"> {{ 'setting_current_password_minlength' | translate }}</b>
                </div>

                <div class="form-group form-group-icon-left"><i class="fa fa-lock input-icon"></i>
                    <label>{{ 'setting_label_new_password' | translate }}</label>
                    <input class="form-control" type="password" name="password" formControlName="password"
                    [class.is-invalid]="changePassword.controls['password'].invalid && changePassword.controls['password'].touched"/>
                </div>
                <div class="errorStyle" *ngIf="changePassword.controls['password'].invalid && changePassword.controls['password'].touched">
                  <b *ngIf="changePassword.controls['password']?.errors.required">{{ 'setting_current_password_required' | translate }}<br></b>
                  <b *ngIf="!changePassword.controls['password']?.errors.minLength"> {{ 'setting_new_password_minlength' | translate }}</b>
                </div>

                <div class="form-group form-group-icon-left"><i class="fa fa-lock input-icon"></i>
                    <label>{{ 'setting_label_confirmPassword' | translate }}</label>
                    <input class="form-control" type="password" name="passwordConfirmation" formControlName="passwordConfirmation"
                    [class.is-invalid]="changePassword.controls['passwordConfirmation'].misMatch"/>
                </div>
                <div class="errorStyle" *ngIf="changePassword.controls['passwordConfirmation'].misMatch || changePassword.controls['passwordConfirmation'].invalid">
                  <b *ngIf="changePassword.controls['passwordConfirmation']?.errors.misMatch"> password mismatch<br></b>
                </div>

                <hr />
                <input class="btn btn-primary" type="submit" value="Change Password" [disabled]="!changePassword.valid"/>
            </form>
        </div>

    </div>
</div>

        <div *ngIf="loader" id="menu">
          <div class="w3-margin-top">
            <div class="preloader-wrapper big active" id="loader">
              <div class="spinner-layer spinner-white-only">
                <div class="circle-clipper left">
                  <div class="circle"></div>
                </div><div class="gap-patch">
                  <div class="circle"></div>
                </div><div class="circle-clipper right">
                  <div class="circle"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
